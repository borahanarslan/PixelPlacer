function createBackGroundCanvas(n){backVideo=document.createElement("video");backVideo.addEventListener("loadedmetadata",OnMetaData);backVideo.src=n;backVideo.width=640;backVideo.height=360;backVideo.loop=!0;backVideo.play()}function OnMetaData(n){var t,r;poop=document.getElementById("vid-1");var i=poop.getBoundingClientRect().width,u=n.target.videoWidth,f=n.target.videoHeight,e=i/u;n.target.width=i;n.target.height=f*e;console.log("newWidth",i);t=document.createElement("canvas");t.id="background-video";t.width=n.target.width;t.height=n.target.height;r=t.getContext("2d");poop.appendChild(t);backVideo.addEventListener("play",function(){var i=this;(function n(){this.paused||this.ended||(r.drawImage(backVideo,0,0,t.width,t.height),setTimeout(n,1e3/30))})()});backVideo.pause();backVideo.play()}function createCanvas(n,t){var r=document.createElement("video"),i,u;r.src=t;r.width=250;r.height=150;r.loop=!0;i=document.createElement("canvas");i.width=r.width;i.height=r.height;i.id="c-"+n;i.draggable=!0;i.ondragstart=drag;u=i.getContext("2d");document.getElementById(n).appendChild(i);r.addEventListener("play",function(){var t=this;(function n(){this.paused||this.ended||(u.drawImage(r,0,0,i.width,i.height),setTimeout(n,1e3/30))})()});r.play()}function allowDrop(n){n.preventDefault()}function drag(n){var t=n.target.getBoundingClientRect();xPos=n.clientX-t.left-window.scrollX;yPos=n.clientY-t.top-window.scrollY;n.dataTransfer.setData("text",n.target.id)}function drop(n){var e,t,u,f,i,r,c;n.preventDefault();e=n.dataTransfer.getData("text");t=document.getElementById(e);n.target.parentElement.appendChild(t);var o=document.getElementById("background-video"),s=n.clientX-o.getBoundingClientRect().left-window.scrollX,h=n.clientY-o.getBoundingClientRect().top-window.scrollY;for(t.style.position="absolute",t.style.left=s-xPos+"px",t.style.top=h-yPos+"px",canvasX=Math.floor(s-xPos),canvasY=Math.floor(h-yPos),u=t.id.replace("c-canvas-",""),f=!1,i=0;i<ProjectObject.ProjectClass.length;i++)r=ProjectObject.ProjectClass[i],r.ProjectVideosId==u&&(r.XPosition=canvasX,r.YPosition=canvasY,f=!0);f==!1&&(c={XPosition:canvasX,YPosition:canvasY,ProjectVideosId:u},ProjectObject.ProjectClass.push(c))}var xPos,yPos,canvasX,canvasY,poop,ProjectObject={},backVideo;ProjectObject.ProjectClass=[];$(document).ready(function(){$("#SaveButton").click(function(){var n=document.getElementById("ProjectTitle").value;ProjectObject.Title=n;console.log("Did my object make",ProjectObject);$.ajax({url:"/Projects/SaveProject",type:"post",dataType:"json",cache:!1,contentType:"application/json : charset=utf-8",data:ProjectObject,success:function(n){console.log("I'm awesome",n);response.result=="Redirect"&&(window.location.href="http://localhost:61006/Home/Index")}})})});